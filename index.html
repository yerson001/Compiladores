<!DOCTYPE HTML>
<html>

<div class='nowiki' val="">
  <font color="purple">

    <body bgcolor="white">

      <head>
        <title>index</title>
        <!--<link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    -->
        <!--<script src="scripts/game.js" charset="utf-8"></script>-->
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="css/styles.css">
        <script src="scripts/utils.js"></script>
        <script src="scripts/lexer.js"></script>
      </head>
      <style>
        canvas {
          border: 4px solid red;
          background-color: #f1f1f1;
          margin: 20px;
          padding: 10px;
          background-image: url('img/you.jpg');
          /*display: flex;
          align-items: center;*/
        }
      </style>

      <div class="container-main" style="background-image: url('img/tabla.png');">
        <!--           THIS PART IS TEXT CODE            -->
        <center>
          <h1>SOURCE CODE</h1>
        </center>
        <main>
          <div class="editor" style="background-image: url('img/green.png');">
            <div class="line">
              <p>1</p>
            </div>
            <div class="text-cont">
              <textarea name="" id="Main_Code" cols="45" rows="100" onkeyup="update()"></textarea>
              <br>
            </div>
          </div>
        </main>
      </div>



      <div class="container-main">

        <div style="text-align:center;">
          <center>
            <h1>OUTPUT</h1>

            <body onload="startGame()">
              <script>
                var myGamePiece;
                let walls = [];
                var elen;

                function letsGo(img, posx, posy, n, p) {
                  var it = 0;
                  for (var i = 0; i < n; i++) {
                    if (p == "v") {
                      elen = new component(30, 30, "scripts/" + img, posx, posy + it, "image");
                    } else {
                      elen = new component(30, 30, "scripts/" + img, posx + it, posy, "image");
                    }
                    walls.push(elen);
                    it += 30;
                  }
                }

                function startGame() {
                  myGamePiece = new component(30, 30, "img/one.png", 30, 30, "image");

                  letsGo("two.png", 0, 0, 17, "v");
                  letsGo("two.png", 1060, 0, 17, "v");
                  letsGo("two.png", 0, 0, 36, "h");
                  letsGo("two.png", 0, 470, 36, "h");
                  // <----------------end walls complete ---------------->
                  //letsGo("two.png",0,60,17,"h");
                  letsGo("two.png", 0, 120, 17, "h");
                  letsGo("two.png", 0, 180, 17, "h");
                  letsGo("two.png", 0, 240, 17, "h");
                  letsGo("two.png", 0, 320, 17, "h");
                  letsGo("two.png", 0, 380, 17, "h");
                  // <----------------obstacles---------->
                  //letsGo("two.png",60,0,17,"v");
                  letsGo("two.png", 120, 0, 17, "v");
                  letsGo("two.png", 180, 0, 17, "v");
                  letsGo("two.png", 240, 0, 17, "v");
                  letsGo("two.png", 320, 0, 17, "v");
                  letsGo("two.png", 380, 0, 17, "v");
                  letsGo("two.png", 440, 0, 17, "v");
                  letsGo("two.png", 500, 0, 17, "v");
                  letsGo("two.png", 560, 0, 17, "v");
                  letsGo("two.png", 620, 0, 17, "v");
                  letsGo("two.png", 680, 0, 17, "v");
                  letsGo("two.png", 740, 0, 17, "v");
                  letsGo("two.png", 800, 0, 17, "v");
                  letsGo("two.png", 860, 0, 17, "v");

                  //<----------------obstacles---------->
                  myGameArea.start();
                }

                var myGameArea = {
                  canvas: document.createElement("canvas"),
                  start: function () {
                    this.canvas.width = 1100;
                    this.canvas.height = 500;
                    this.context = this.canvas.getContext("2d");
                    document.body.insertBefore(this.canvas, document.body.childNodes[0]);
                    this.frameNo = 0;
                    this.interval = setInterval(updateGameArea, 20);
                  },
                  clear: function () {
                    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
                  },
                  stop: function () {
                    clearInterval(this.interval);
                  }
                }

                function component(width, height, color, x, y, type) {
                  this.type = type;
                  if (type == "image") {
                    this.image = new Image();
                    this.image.src = color;
                  }
                  this.width = width;
                  this.height = height;
                  this.speedX = 0;
                  this.speedY = 0;
                  this.x = x;
                  this.y = y;
                  this.update = function () {
                    ctx = myGameArea.context;
                    if (type == "image") {
                      ctx.drawImage(this.image,
                        this.x,
                        this.y,
                        this.width, this.height);
                    } else {
                      ctx.fillStyle = color;
                      ctx.fillRect(this.x, this.y, this.width, this.height);
                    }
                  }
                  this.newPos = function () {
                    this.x += this.speedX;
                    this.y += this.speedY;
                  }
                  this.crashWith = function (otherobj) {
                    var myleft = this.x;
                    var myright = this.x + (this.width);
                    var mytop = this.y;
                    var mybottom = this.y + (this.height);
                    var otherleft = otherobj.x;
                    var otherright = otherobj.x + (otherobj.width);
                    var othertop = otherobj.y;
                    var otherbottom = otherobj.y + (otherobj.height);
                    var crash = true;
                    if ((mybottom < othertop) || (mytop > otherbottom) || (myright < otherleft) || (myleft > otherright)) {
                      crash = false;
                    }
                    return crash;
                  }
                }

                function updateGameArea() {
                  myGameArea.clear();
                  myGamePiece.newPos();
                  myGamePiece.update();

                  for (var i = 0; i < walls.length; i++) {
                    walls[i].newPos();
                    walls[i].update();
                  }

                  for (var i = 0; i < walls.length; i++) {
                    if(myGamePiece.crashWith(walls[i])){
                      console.log("chocaste mrd");
                    }
                  }

                }
                var index = 0;
                function move(dir) {
                  msg = document.getElementById('msg').value;
                  console.log(msg);
                  myGamePiece.image.src = "scripts/two.png";
                  if (dir == "u" || msg[index] == "u") { myGamePiece.speedY = -5; }
                  if (dir == "d" || msg[index] == "d") { myGamePiece.speedY = 5; }
                  if (dir == "l" || msg[index] == "l") { myGamePiece.speedX = -5; }
                  if (dir == "r" || msg[index] == "r") { myGamePiece.speedX = 5; }
                  index += 1;
                }

                function clearmove() {
                  myGamePiece.image.src = "img/one.png";
                  myGamePiece.speedX = 0;
                  myGamePiece.speedY = 0;
                }

              </script>

        </div>
        <div style="text-align:center;width:480px;">
          <button onmousedown="move('u')" onmouseup="clearmove()" ontouchstart="move('u')">UP</button><br><br>
          <button onmousedown="move('l')" onmouseup="clearmove()" ontouchstart="move('l')">LEFT</button>
          <button onmousedown="move('r')" onmouseup="clearmove()" ontouchstart="move('r')">RIGHT</button><br><br>
          <button onmousedown="move('d')" onmouseup="clearmove()" ontouchstart="move('d')">DOWN</button>
        </div>
        <br>
        <tr>
          <td>
            <input type="text" value="" id="msg">
          </td>
        </tr>
        <p id="output"></p>
        <tr>
          <td><button onmousedown="move()" onmouseup="clearmove()" ontouchstart="move()">DEC</button></td>
        </tr>
        <!--</body>-->
        <br>
        <input type="button" id="btnCompile" value="RUN" onclick="init();" />
        <div>
          <br>
          COMPILER OUTPUT HERE OK
          <br>
          <textarea id="Output" cols="45" rows="8"></textarea>
        </div>
      </div>
      </center>
    </body>

</html>